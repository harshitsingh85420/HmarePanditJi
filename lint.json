[{"filePath":"C:\\Users\\ss\\Documents\\HmarePanditJi\\apps\\web\\app\\search\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":3,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used.","line":5,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1082,1085],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1082,1085],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'travelLoading' is assigned a value but never used.","line":49,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1629,1632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1629,1632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'muhuratTime' is assigned a value but never used.","line":58,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":463,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25024,25027],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25024,25027],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { Button, Input, Card, PanditCard, Skeleton, GuestBanner } from \"@hmarepanditji/ui\";\r\n\r\nconst SUPPORTED_PUJA_TYPES = [\r\n    \"Vivah\",\r\n    \"Griha Pravesh\",\r\n    \"Satyanarayan Puja\",\r\n    \"Mundan\",\r\n    \"Namkaran\",\r\n];\r\n\r\nconst SUPPORTED_LANGUAGES = [\"Hindi\", \"Sanskrit\", \"English\", \"Marathi\", \"Gujarati\", \"Bengali\", \"Tamil\", \"Telugu\"];\r\nconst TRAVEL_MODES = [\r\n    { label: \"≡ƒÜù Self-Drive\", value: \"SELF_DRIVE\" },\r\n    { label: \"≡ƒÜé Train\", value: \"TRAIN\" },\r\n    { label: \"Γ£ê∩╕Å Flight\", value: \"FLIGHT\" },\r\n    { label: \"≡ƒÜò Cab\", value: \"CAB\" },\r\n    { label: \"Any\", value: \"ANY\" }\r\n];\r\n\r\ninterface Pandit {\r\n    id: string;\r\n    name: string;\r\n    profilePhotoUrl?: string;\r\n    rating: number;\r\n    totalReviews: number;\r\n    completedBookings: number;\r\n    experienceYears: number;\r\n    location: string;\r\n    specializations: string[];\r\n    languages: string[];\r\n    verificationStatus: string;\r\n    travelPreferences: any;\r\n    isOnline: boolean;\r\n    pujaServices: { pujaType: string; dakshinaAmount: number; durationHours: number }[];\r\n}\r\n\r\nexport default function SearchPage() {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n\r\n    // State\r\n    const [pandits, setPandits] = useState<Pandit[]>([]);\r\n    const [total, setTotal] = useState(0);\r\n    const [loading, setLoading] = useState(true);\r\n    const [travelLoading, setTravelLoading] = useState(false);\r\n    const [travelOptions, setTravelOptions] = useState<Record<string, any>>({});\r\n    const [favorites, setFavorites] = useState<string[]>([]);\r\n    const [showMobileFilter, setShowMobileFilter] = useState(false);\r\n\r\n    // Filters from URL\r\n    const pujaType = searchParams.get(\"pujaType\") || \"\";\r\n    const city = searchParams.get(\"city\") || \"\";\r\n    const date = searchParams.get(\"date\") || \"\";\r\n    const muhuratTime = searchParams.get(\"muhuratTime\") || \"\";\r\n    const budget = searchParams.get(\"budget\") || \"\";\r\n    const minRating = searchParams.get(\"rating\") || \"\";\r\n    const lang = searchParams.get(\"lang\") || \"\";\r\n    const travelMode = searchParams.get(\"travelMode\") || \"\";\r\n    const distance = searchParams.get(\"distance\") || \"\";\r\n    const sort = searchParams.get(\"sort\") || \"rating\";\r\n    const pageParam = parseInt(searchParams.get(\"page\") || \"1\", 10);\r\n\r\n    const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\r\n\r\n    // Local state for UI inputs (to avoid spamming URL updates on every keystroke)\r\n    const [localCity, setLocalCity] = useState(city);\r\n    const [localDate, setLocalDate] = useState(date);\r\n    const [localBudget, setLocalBudget] = useState(budget ? parseInt(budget, 10) : 50000);\r\n    const [localDistance, setLocalDistance] = useState(distance ? parseInt(distance, 10) : 500);\r\n    const [muhuratCount, setMuhuratCount] = useState<number | null>(null);\r\n\r\n    const updateFilters = (key: string, value: string | null) => {\r\n        const params = new URLSearchParams(searchParams.toString());\r\n        if (value) {\r\n            params.set(key, value);\r\n        } else {\r\n            params.delete(key);\r\n        }\r\n        // reset page to 1 when filters change\r\n        if (key !== \"page\") params.set(\"page\", \"1\");\r\n        router.push(`/search?${params.toString()}`);\r\n    };\r\n\r\n    const removeFilter = (key: string) => updateFilters(key, null);\r\n\r\n    const fetchPandits = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const q = new URLSearchParams();\r\n            if (pujaType) q.append(\"pujaType\", pujaType);\r\n            if (city) q.append(\"city\", city);\r\n            if (date) q.append(\"date\", date);\r\n            if (minRating) q.append(\"minRating\", minRating);\r\n            if (lang) q.append(\"language\", lang);\r\n            if (travelMode && travelMode !== \"ANY\") q.append(\"travelMode\", travelMode);\r\n            if (budget) q.append(\"maxDakshina\", budget);\r\n            if (distance) q.append(\"maxDistance\", distance);\r\n            q.append(\"sort\", sort);\r\n            q.append(\"page\", pageParam.toString());\r\n            q.append(\"limit\", \"12\");\r\n\r\n            const res = await fetch(`http://localhost:4000/api/pandits?${q.toString()}`);\r\n            if (!res.ok) throw new Error(\"Failed to load pandits\");\r\n            const data = await res.json();\r\n\r\n            if (pageParam === 1) {\r\n                setPandits(data.data.pandits);\r\n            } else {\r\n                setPandits(prev => [...prev, ...data.data.pandits]);\r\n            }\r\n            setTotal(data.data.pagination.total);\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [pujaType, city, date, minRating, lang, travelMode, budget, distance, sort, pageParam]);\r\n\r\n    const checkMuhurats = async () => {\r\n        if (!localDate) return;\r\n        try {\r\n            const res = await fetch(`http://localhost:4000/api/muhurat?date=${localDate}`);\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                // just count how many muhurats available a given day\r\n                if (data.data?.muhurats) {\r\n                    setMuhuratCount(data.data.muhurats.length);\r\n                } else {\r\n                    setMuhuratCount(0);\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    const calculateTravel = useCallback(async (currentPandits: Pandit[]) => {\r\n        if (!city) return;\r\n        const requests = currentPandits\r\n            .filter((p) => p.location.toLowerCase() !== city.toLowerCase())\r\n            .map((p) => ({\r\n                fromCity: p.location.split(\",\")[0].trim(),\r\n                toCity: city,\r\n                panditId: p.id,\r\n            }));\r\n\r\n        if (requests.length === 0) return;\r\n\r\n        setTravelLoading(true);\r\n        try {\r\n            const res = await fetch(\"http://localhost:4000/api/travel/batch-calculate\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    requests: requests.slice(0, 20), // batch-limit 20\r\n                    eventDays: 1,\r\n                }),\r\n            });\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setTravelOptions((prev) => ({ ...prev, ...data.data.results }));\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Travel calc failed\", err);\r\n        } finally {\r\n            setTravelLoading(false);\r\n        }\r\n    }, [city]);\r\n\r\n    const fetchFavorites = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const res = await fetch(\"http://localhost:4000/api/customers/me/favorites\", {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setFavorites(data.data || []);\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }, [token]);\r\n\r\n    useEffect(() => {\r\n        fetchPandits();\r\n    }, [fetchPandits]);\r\n\r\n    useEffect(() => {\r\n        if (pandits.length > 0 && city) {\r\n            calculateTravel(pandits);\r\n        }\r\n    }, [pandits, city, calculateTravel]);\r\n\r\n    useEffect(() => {\r\n        if (token) fetchFavorites();\r\n    }, [fetchFavorites, token]);\r\n\r\n    const toggleFavorite = async (panditId: string) => {\r\n        if (!token) {\r\n            router.push(`/login?next=/search?${searchParams.toString()}`);\r\n            return;\r\n        }\r\n        const isFav = favorites.includes(panditId);\r\n        setFavorites(prev => isFav ? prev.filter(id => id !== panditId) : [...prev, panditId]);\r\n        try {\r\n            await fetch(`http://localhost:4000/api/customers/me/favorites/${panditId}`, {\r\n                method: \"POST\",\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n        } catch (err) {\r\n            console.error(\"Toggle fav failed\", err);\r\n            // Revert optimism\r\n            setFavorites(prev => isFav ? [...prev, panditId] : prev.filter(id => id !== panditId));\r\n        }\r\n    };\r\n\r\n    const numFiltersApplied = [pujaType, city, date, minRating, lang, travelMode, budget, distance].filter(Boolean).length;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 flex flex-col font-sans\">\r\n            {/* Top Bar (Sticky) */}\r\n            <div className=\"sticky top-0 z-40 bg-white border-b border-gray-200 shadow-sm\">\r\n                <div className=\"max-w-7xl mx-auto px-4 py-3 flex flex-col sm:flex-row items-center justify-between gap-4\">\r\n                    <div className=\"flex gap-2 text-sm text-gray-700 w-full sm:w-auto overflow-x-auto pb-2 sm:pb-0\">\r\n                        <select\r\n                            className=\"px-3 py-2 border rounded-md\"\r\n                            value={pujaType}\r\n                            onChange={(e) => updateFilters(\"pujaType\", e.target.value)}\r\n                        >\r\n                            <option value=\"\">Puja Type Γû╛</option>\r\n                            {SUPPORTED_PUJA_TYPES.map(p => <option key={p} value={p}>{p}</option>)}\r\n                        </select>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"City\"\r\n                            className=\"px-3 py-2 border rounded-md w-32\"\r\n                            value={localCity}\r\n                            onChange={(e) => setLocalCity(e.target.value)}\r\n                            onBlur={() => updateFilters(\"city\", localCity)}\r\n                            onKeyDown={(e) => e.key === \"Enter\" && updateFilters(\"city\", localCity)}\r\n                        />\r\n                        <input\r\n                            type=\"date\"\r\n                            className=\"px-3 py-2 border rounded-md\"\r\n                            value={localDate}\r\n                            onChange={(e) => { setLocalDate(e.target.value); updateFilters(\"date\", e.target.value); }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-2 items-center w-full sm:w-auto justify-between sm:justify-end\">\r\n                        <span className=\"text-gray-500 text-sm hidden sm:inline\">Sort by:</span>\r\n                        <select\r\n                            className=\"text-sm px-2 py-1 border rounded\"\r\n                            value={sort}\r\n                            onChange={(e) => updateFilters(\"sort\", e.target.value)}\r\n                        >\r\n                            <option value=\"rating\">Best Match</option>\r\n                            <option value=\"price_asc\">Price: Low - High</option>\r\n                            <option value=\"price_desc\">Price: High - Low</option>\r\n                            <option value=\"distance\">Distance</option>\r\n                        </select>\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"lg:hidden\" onClick={() => setShowMobileFilter(true)}>\r\n                            Filters {numFiltersApplied > 0 && `(${numFiltersApplied})`}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Active Filters Pills */}\r\n                {numFiltersApplied > 0 && (\r\n                    <div className=\"max-w-7xl mx-auto px-4 py-2 flex gap-2 overflow-x-auto bg-gray-50 border-t border-gray-100\">\r\n                        {pujaType && <span className=\"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs flex items-center\">{pujaType} <button onClick={() => removeFilter(\"pujaType\")} className=\"ml-1 text-orange-500 font-bold hover:text-orange-900\">├ù</button></span>}\r\n                        {city && <span className=\"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs flex items-center\">{city} <button onClick={() => removeFilter(\"city\")} className=\"ml-1 text-orange-500 font-bold hover:text-orange-900\">├ù</button></span>}\r\n                        {date && <span className=\"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs flex items-center\">{date} <button onClick={() => removeFilter(\"date\")} className=\"ml-1 text-orange-500 font-bold hover:text-orange-900\">├ù</button></span>}\r\n                        {minRating && <span className=\"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs flex items-center\">{minRating}Γÿà+ <button onClick={() => removeFilter(\"rating\")} className=\"ml-1 text-orange-500 font-bold hover:text-orange-900\">├ù</button></span>}\r\n                        {lang && <span className=\"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs flex items-center\">{lang} <button onClick={() => removeFilter(\"lang\")} className=\"ml-1 text-orange-500 font-bold hover:text-orange-900\">├ù</button></span>}\r\n                        {travelMode && <span className=\"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs flex items-center\">Mode: {travelMode} <button onClick={() => removeFilter(\"travelMode\")} className=\"ml-1 text-orange-500 font-bold hover:text-orange-900\">├ù</button></span>}\r\n                        <button className=\"text-sm text-gray-500 underline ml-2\" onClick={() => router.push(\"/search\")}>Clear All</button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"max-w-7xl mx-auto px-4 py-6 flex w-full gap-6 flex-1\">\r\n                {/* Sidebar Filters */}\r\n                <aside className={`w-full lg:w-64 bg-white p-4 rounded-md shadow-sm border border-gray-200 lg:block flex-shrink-0\r\n          ${showMobileFilter ? 'fixed inset-0 z-50 overflow-y-auto block' : 'hidden'}\r\n        `}>\r\n                    <div className=\"flex justify-between items-center mb-6 lg:hidden\">\r\n                        <h2 className=\"text-lg font-bold\">Filters</h2>\r\n                        <button onClick={() => setShowMobileFilter(false)} className=\"text-gray-500 text-2xl\">├ù</button>\r\n                    </div>\r\n\r\n                    {/* Puja Type */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"font-semibold text-gray-800 mb-2\">Puja Type</h3>\r\n                        <div className=\"flex flex-col gap-2\">\r\n                            {SUPPORTED_PUJA_TYPES.map(p => (\r\n                                <label key={p} className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                                    <input type=\"radio\" name=\"pujaType\" checked={pujaType === p} onChange={() => updateFilters(\"pujaType\", p)} className=\"accent-orange-500\" /> {p}\r\n                                </label>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Date & Muhurat */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"font-semibold text-gray-800 mb-2\">Date</h3>\r\n                        <input\r\n                            type=\"date\"\r\n                            className=\"px-3 py-2 border rounded-md w-full mb-2 text-sm\"\r\n                            value={localDate}\r\n                            onChange={(e) => setLocalDate(e.target.value)}\r\n                            onBlur={() => updateFilters(\"date\", localDate)}\r\n                        />\r\n                        <Button size=\"sm\" variant=\"outline\" className=\"w-full text-xs\" onClick={checkMuhurats}>Check Muhurat</Button>\r\n                        {muhuratCount !== null && (\r\n                            <div className=\"mt-2 text-xs text-orange-600 bg-orange-50 p-2 rounded border border-orange-200\">\r\n                                ≡ƒö╢ {muhuratCount} auspicious muhurat{muhuratCount !== 1 && 's'} on this date\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Budget */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"font-semibold text-gray-800 mb-2\">Max Dakshina (Γé╣)</h3>\r\n                        <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\r\n                            <span>Γé╣5,000</span>\r\n                            <span>Γé╣{localBudget.toLocaleString()}</span>\r\n                            <span>Γé╣1,00,000</span>\r\n                        </div>\r\n                        <input\r\n                            type=\"range\" min=\"5000\" max=\"100000\" step=\"5000\"\r\n                            className=\"w-full accent-orange-500\"\r\n                            value={localBudget}\r\n                            onChange={(e) => setLocalBudget(parseInt(e.target.value, 10))}\r\n                            onMouseUp={() => updateFilters(\"budget\", localBudget.toString())}\r\n                            onTouchEnd={() => updateFilters(\"budget\", localBudget.toString())}\r\n                        />\r\n                        <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                            <button onClick={() => { setLocalBudget(15000); updateFilters(\"budget\", \"15000\"); }} className=\"text-[10px] px-2 py-1 bg-gray-100 rounded hover:bg-gray-200 text-gray-700\">Under 15k</button>\r\n                            <button onClick={() => { setLocalBudget(40000); updateFilters(\"budget\", \"40000\"); }} className=\"text-[10px] px-2 py-1 bg-gray-100 rounded hover:bg-gray-200 text-gray-700\">Under 40k</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Rating */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"font-semibold text-gray-800 mb-2\">Minimum Rating</h3>\r\n                        <div className=\"flex gap-2\">\r\n                            {[\"4.5\", \"4\", \"3\", \"Any\"].map(r => (\r\n                                <button\r\n                                    key={r}\r\n                                    onClick={() => updateFilters(\"rating\", r === \"Any\" ? null : r)}\r\n                                    className={`text-xs px-2 py-1 border rounded ${minRating === r || (r === \"Any\" && !minRating) ? 'bg-orange-50 border-orange-500 text-orange-700' : 'bg-white text-gray-600 hover:bg-gray-50'}`}\r\n                                >\r\n                                    {r === \"Any\" ? r : `${r}Γÿà+`}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Languages */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"font-semibold text-gray-800 mb-2\">Languages</h3>\r\n                        <div className=\"flex flex-col gap-2 max-h-40 overflow-y-auto\">\r\n                            {SUPPORTED_LANGUAGES.map(l => (\r\n                                <label key={l} className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                                    <input type=\"radio\" name=\"languageRadio\" checked={lang === l} onChange={() => updateFilters(\"lang\", l)} className=\"accent-orange-500\" /> {l}\r\n                                </label>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Travel Mode */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"font-semibold text-gray-800 mb-2\">Travel Mode</h3>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                            {TRAVEL_MODES.map(tm => (\r\n                                <button\r\n                                    key={tm.value}\r\n                                    onClick={() => updateFilters(\"travelMode\", tm.value)}\r\n                                    className={`text-xs px-2 py-1 rounded-full border ${travelMode === tm.value ? 'bg-orange-50 border-orange-500 text-orange-700' : 'bg-gray-50 border-gray-200 text-gray-600'}`}\r\n                                >\r\n                                    {tm.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Distance */}\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"font-semibold text-gray-800 mb-2\">Max Distance (km)</h3>\r\n                        <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\r\n                            <span>0</span>\r\n                            <span>{localDistance} km</span>\r\n                            <span>2000</span>\r\n                        </div>\r\n                        <input\r\n                            type=\"range\" min=\"10\" max=\"2000\" step=\"10\"\r\n                            className=\"w-full accent-orange-500\"\r\n                            value={localDistance}\r\n                            onChange={(e) => setLocalDistance(parseInt(e.target.value, 10))}\r\n                            onMouseUp={() => updateFilters(\"distance\", localDistance.toString())}\r\n                            onTouchEnd={() => updateFilters(\"distance\", localDistance.toString())}\r\n                        />\r\n                        <div className=\"flex flex-wrap gap-1 mt-2\">\r\n                            <button onClick={() => { setLocalDistance(50); updateFilters(\"distance\", \"50\") }} className=\"text-[10px] px-2 py-1 bg-gray-100 rounded hover:bg-gray-200 text-gray-700\">Local (&lt;50)</button>\r\n                            <button onClick={() => { setLocalDistance(500); updateFilters(\"distance\", \"500\") }} className=\"text-[10px] px-2 py-1 bg-gray-100 rounded hover:bg-gray-200 text-gray-700\">Regional (&lt;500)</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {showMobileFilter && (\r\n                        <div className=\"sticky bottom-4\">\r\n                            <Button className=\"w-full bg-orange-600 hover:bg-orange-700 text-white\" onClick={() => setShowMobileFilter(false)}>Show Results</Button>\r\n                        </div>\r\n                    )}\r\n                </aside>\r\n\r\n                {/* Results Grid */}\r\n                <main className=\"flex-1 w-full flex flex-col\">\r\n                    {!token && <GuestBanner className=\"mb-4\" message=\"Sign in to save favorite pandits and get personalized recommendations!\" />}\r\n\r\n                    <div className=\"flex justify-between items-center mb-6\">\r\n                        <h2 className=\"text-xl font-medium text-gray-800\">\r\n                            Showing {pandits.length} verified Pandit{pandits.length !== 1 ? 's' : ''}\r\n                        </h2>\r\n                    </div>\r\n\r\n                    {loading && pageParam === 1 ? (\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 w-full\">\r\n                            {Array.from({ length: 6 }).map((_, i) => (\r\n                                <div key={i} className=\"border rounded-xl p-4 w-full h-64 flex flex-col gap-4\">\r\n                                    <div className=\"flex gap-4 items-center\">\r\n                                        <Skeleton width={64} height={64} style={{ borderRadius: '50%' }} />\r\n                                        <div className=\"flex flex-col gap-2\">\r\n                                            <Skeleton width={120} height={20} />\r\n                                            <Skeleton width={80} height={16} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <Skeleton width=\"100%\" height={24} />\r\n                                    <Skeleton width=\"100%\" height={24} />\r\n                                    <Skeleton width=\"100%\" height={40} />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : pandits.length === 0 ? (\r\n                        <div className=\"flex flex-col items-center justify-center p-12 bg-white rounded-xl border border-gray-200 text-center\">\r\n                            <div className=\"text-5xl mb-4 text-gray-300\">≡ƒöì</div>\r\n                            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">No pandits found</h3>\r\n                            <p className=\"text-gray-500 max-w-sm mb-6\">\r\n                                Try expanding your distance filter, removing some filters, or checking a different date.\r\n                            </p>\r\n                            <Button variant=\"outline\" onClick={() => router.push(\"/search\")}>Clear All Filters</Button>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6 items-stretch w-full\">\r\n                                {pandits.map(p => {\r\n                                    const rawOptions = travelOptions[p.id] || [];\r\n                                    const options = Array.isArray(rawOptions) ? rawOptions.map((o: any) => ({\r\n                                        ...o,\r\n                                        mode: o.mode.toLowerCase(),\r\n                                    })) : [];\r\n\r\n                                    return (\r\n                                        <PanditCard\r\n                                            key={p.id}\r\n                                            pandit={{\r\n                                                id: p.id,\r\n                                                name: p.name,\r\n                                                profilePhotoUrl: p.profilePhotoUrl,\r\n                                                rating: p.rating,\r\n                                                totalReviews: p.totalReviews,\r\n                                                experienceYears: p.experienceYears,\r\n                                                location: p.location,\r\n                                                specializations: p.specializations,\r\n                                                languages: p.languages,\r\n                                                verificationStatus: p.verificationStatus,\r\n                                                isOnline: p.isOnline,\r\n                                            }}\r\n                                            customerCity={city}\r\n                                            travelOptions={options.length > 0 ? options : undefined}\r\n                                            onBook={() => router.push(`/booking/new?panditId=${p.id}&pujaType=${pujaType || p.pujaServices?.[0]?.pujaType}`)}\r\n                                            onViewProfile={() => router.push(`/pandit/${p.id}`)}\r\n                                            isFavorited={favorites.includes(p.id)}\r\n                                            onToggleFavorite={() => toggleFavorite(p.id)}\r\n                                        />\r\n                                    );\r\n                                })}\r\n                            </div>\r\n\r\n                            {total > pandits.length && (\r\n                                <div className=\"mt-10 flex flex-col items-center\">\r\n                                    <p className=\"text-sm text-gray-500 mb-4\">Showing {pandits.length} of {total} results</p>\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        onClick={() => updateFilters(\"page\", (pageParam + 1).toString())}\r\n                                        disabled={loading}\r\n                                    >\r\n                                        {loading ? \"Loading...\" : \"Load More\"}\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]}]
